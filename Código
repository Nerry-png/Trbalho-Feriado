# Completo com interface!!!

import tkinter
import requests
import re

def ChamadaAPI(Ano):
    url = "https://date.nager.at/api/v3/PublicHolidays/"+Ano+"/BR"

    payload = {}
    headers = {
      'accept': 'application/json'
      }

    response = requests.request("GET", url, headers=headers, data=payload)

    return response.text

def CriarLista(Ano):
    Feriados = open("feriados.txt", "a")
    
    with open("feriados.txt", "a") as Feriados:
      Feriados.write("")

    ListaFeriados = set(re.findall("\d{4}-\d{2}-\d{2}", ChamadaAPI(Ano)))

    for feriado in ListaFeriados:
      with open("feriados.txt", "a") as Feriados:
        Feriados.write(feriado)
        Feriados.write(" é feriado!\n")

    with open("feriados.txt") as Feriados:
       print(Feriados.read())

root = tkinter.Tk()
root.title("Feriados!!!")
root.resizable(True, True)

myvar = tkinter.StringVar()

def data(*args):
  print ("Ano", myvar.get())
  CriarLista(myvar.get())

label = tkinter.Label(root, textvariable=myvar)
label.pack()

text_entry = tkinter.Entry(root, textvariable=myvar)
button1 = tkinter.Button(root, text="Me dê os feriados!", command=data) 
button1.pack()
text_entry.pack()
    
root.mainloop()
